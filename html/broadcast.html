<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NOSTAI — Вещательная</title>
  <style>
    @font-face {
      font-family: 'DestroyCyr';
      src: url('assets/fonts/destroycyr.ttf') format('truetype');
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
      color: #e3e3e3;
      font-family: 'DestroyCyr', sans-serif;
    }

    /* Фон */
    body::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('assets/images/broadcast-bg.png') center/cover no-repeat;
      opacity: 0.25;
      z-index: -1;
      transition: opacity 0.2s ease;
    }

    /* Контейнер сообщений */
    #messages {
      position: absolute;
      top: 20px;
      left: 40px;
      width: calc(100% - 80px);
      height: calc(100% - 100px);
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 6px;
      font-size: 18px;
      line-height: 1.3;
    }

    /* Строка ввода */
    #inputContainer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.5);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    #inputField {
      width: 100%;
      background: none;
      border: none;
      outline: none;
      color: #fff;
      font-family: inherit;
      font-size: 18px;
      padding: 6px;
    }

    /* Цвета фракций */
    .volunteers { color: #ffb347; }  /* Волонтёры */
    .army { color: #00aaff; }        /* ВС РФ */
    .redcross { color: #ff6b6b; }    /* Красный Крест */
    .emerg { color: #ffdd55; }       /* МЧС */

    /* Радио эффект */
    .radio-flash::before {
      content: '';
      position: fixed;
      inset: 0;
      background: radial-gradient(circle, rgba(255,255,255,0.1), transparent 70%);
      opacity: 0;
      animation: flash 0.2s ease;
      z-index: 2;
      pointer-events: none;
    }

    @keyframes flash {
      0% { opacity: 0.2; }
      50% { opacity: 0.6; }
      100% { opacity: 0; }
    }

    /* Помехи на фоне */
    .noise {
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        rgba(255,255,255,0.05),
        rgba(255,255,255,0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      opacity: 0.03;
      animation: noiseMove 1s infinite linear;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes noiseMove {
      from { background-position: 0 0; }
      to { background-position: 0 100%; }
    }
  </style>
</head>
<body>
  <div class="noise"></div>
  <div id="messages"></div>

  <div id="inputContainer">
    <input id="inputField" type="text" placeholder="Введите сообщение..." />
  </div>

  <audio id="radioNoise" src="assets/music/radio_noise.mp3" preload="auto"></audio>
  <audio id="radioBeep" src="assets/music/beep-1 звук.mp3" preload="auto"></audio>

  <script>
    const messagesContainer = document.getElementById('messages');
    const radioNoise = document.getElementById('radioNoise');
    const radioBeep = document.getElementById('radioBeep');
    const body = document.body;

    const factions = [
      { name: 'ВС РФ', class: 'army', messages: [
        'Объект 7 потерян. Повторяю: потерян.',
        'Наблюдаем странные огни на склоне.',
        'Станция связи не отвечает уже 20 минут.'
      ]},
      { name: 'Красный Крест', class: 'redcross', messages: [
        'Раненые в плохом состоянии. Запрашиваем эвакуацию.',
        'Поступают случаи галлюцинаций среди выживших.',
        'Медикаменты заканчиваются, остаётся минимум.'
      ]},
      { name: 'МЧС', class: 'emerg', messages: [
        'Огонь движется к востоку, пламя выше деревьев.',
        'Туман усиливается, видимость падает.',
        'Люди уходят в лес, никто не возвращается.'
      ]},
      { name: 'Волонтёры', class: 'volunteers', messages: [
        'Мы видели их... глаза как угли.',
        'Кто-то шепчет имена из пепла.',
        'Становится холодно. Даже рядом с костром.'
      ]}
    ];

    function playRadioEffects() {
      // Включаем лёгкие звуки радио
      radioBeep.currentTime = 0;
      radioBeep.volume = 0.5;
      radioBeep.play();

      radioNoise.currentTime = 0;
      radioNoise.volume = 0.3;
      radioNoise.play();

      // Визуальная вспышка
      body.classList.add('radio-flash');
      setTimeout(() => body.classList.remove('radio-flash'), 200);
    }

    function generateMessage() {
      playRadioEffects();

      const faction = factions[Math.floor(Math.random() * factions.length)];
      const text = faction.messages[Math.floor(Math.random() * faction.messages.length)];

      const div = document.createElement('div');
      div.classList.add(faction.class);
      div.textContent = `${faction.name}: ${text}`;
      messagesContainer.appendChild(div);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    setInterval(generateMessage, 4000);
  </script>
</body>
</html>
