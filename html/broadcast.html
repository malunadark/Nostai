<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NOSTAI — Вещательная</title>
  <style>
    @font-face {
      font-family: 'DestroyCyr';
      src: url('assets/fonts/destroycyr.ttf') format('truetype');
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
      color: #d9d9d9;
      font-family: 'DestroyCyr', sans-serif;
    }

    /* Фон */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: url('assets/images/broadcast-bg.png') center/cover no-repeat;
      filter: brightness(0.35) contrast(1.1);
      opacity: 0.35;
      z-index: -2;
    }

    /* Эффект помех */
    .noise {
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        rgba(255, 255, 255, 0.03),
        rgba(255, 255, 255, 0.03) 1px,
        transparent 1px,
        transparent 2px
      );
      animation: noiseMove 1s infinite linear;
      opacity: 0.04;
      z-index: -1;
      pointer-events: none;
    }

    @keyframes noiseMove {
      from { background-position: 0 0; }
      to { background-position: 0 100%; }
    }

    /* Логотип */
    #logo {
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 84px;
      letter-spacing: 6px;
      color: #ff9933;
      text-shadow:
        0 0 25px rgba(255, 120, 20, 0.8),
        0 0 55px rgba(255, 80, 0, 0.6),
        2px 2px 4px #000;
      background: url('assets/images/granite-noise.png') repeat;
      -webkit-background-clip: text;
      background-clip: text;
      animation: flicker 3s infinite;
    }

    @keyframes flicker {
      0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        opacity: 1;
      }
      20%, 24%, 55% {
        opacity: 0.7;
      }
    }

    /* Контейнер сообщений */
    #messages {
      position: absolute;
      top: 160px;
      left: 60px;
      width: calc(100% - 100px);
      height: calc(100% - 220px);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 4px;
      font-size: 16px;
      line-height: 1.25;
      text-shadow:
        0 0 4px rgba(255,140,40,0.4),
        0 0 8px rgba(255,80,20,0.2);
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    .msg {
      opacity: 0;
      animation: appear 0.6s ease forwards;
    }

    @keyframes appear {
      0% { opacity: 0; transform: translateY(8px); filter: blur(2px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }

    /* Цвета фракций */
    .army { color: #6cc3ff; }
    .redcross { color: #ff6b6b; }
    .emerg { color: #ffdd55; }
    .volunteers { color: #ffb347; }

    /* Поле ввода */
    #inputContainer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.6);
      border-top: 1px solid rgba(255, 255, 255, 0.15);
    }

    #inputField {
      width: 100%;
      background: none;
      border: none;
      outline: none;
      color: #ccc;
      font-family: inherit;
      font-size: 16px;
      padding: 6px;
      text-shadow: 0 0 5px rgba(255,255,255,0.3);
    }
  </style>
</head>
<body>
  <div id="logo">NOSTAI</div>
  <div class="noise"></div>
  <div id="messages"></div>

  <div id="inputContainer">
    <input id="inputField" type="text" placeholder="Введите сообщение..." />
  </div>

  <!-- Радиошум -->
  <audio id="radioNoise" src="assets/music/radio_noise.mp3" preload="auto" loop></audio>
  <audio id="radioBeep" src="assets/music/beep-1 звук.mp3" preload="auto"></audio>

  <script>
    const messagesContainer = document.getElementById('messages');
    const radioNoise = document.getElementById('radioNoise');
    const radioBeep = document.getElementById('radioBeep');

    // Фракции
    const factions = [
      { class: 'army', prefix: '[ВС РФ]', messages: [
        'Пятый сектор под контролем. Повторяю, сектор под контролем.',
        'Обнаружено свечение в районе координат 54°... Проверяем.',
        'Поступило распоряжение — никому не покидать периметр.',
        'Радиосвязь с постом «Север» прервана, выясняем причину.'
      ]},
      { class: 'emerg', prefix: '[МЧС]', messages: [
        'Задымление в квадрате D7 усиливается.',
        'Нужны добровольцы для эвакуации оставшихся.',
        'Пламя переходит к старым шахтам. Берегитесь газа.',
        'Приём, кто видит сигнальные ракеты на востоке?'
      ]},
      { class: 'redcross', prefix: '[КРАСНЫЙ КРЕСТ]', messages: [
        'Требуется помощь медиков, запас перевязок исчерпан.',
        'Приняли раненых из отряда. Состояние тяжёлое.',
        'Точка приёма в лагере «Горный» восстановлена.',
        'Нужен транспорт, повторяю, нужен транспорт!'
      ]},
      { class: 'volunteers', prefix: '[ВОЛОНТЁРЫ]', messages: [
        'Мы всё ещё в живых. Кто рядом — ответьте.',
        'Нашли следы. Кажется, не человеческие.',
        'Река светится... никто не верит, пока не видит сам.',
        'Ветер говорит — уходите. Но мы остались.'
      ]}
    ];

    function playBeep() {
      radioBeep.currentTime = 0;
      radioBeep.play().catch(()=>{});
    }

    function generateRadioMessage() {
      const faction = factions[Math.floor(Math.random() * factions.length)];
      const message = faction.messages[Math.floor(Math.random() * faction.messages.length)];

      const msg = document.createElement('div');
      msg.className = `msg ${faction.class}`;
      msg.textContent = `${faction.prefix} ${message}`;

      messagesContainer.appendChild(msg);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;

      playBeep();
    }

    // Запуск фонового шума
    window.addEventListener('load', () => {
      radioNoise.volume = 0.15;
      radioNoise.play().catch(()=>{});
    });

    // Генерация сообщений
    setInterval(generateRadioMessage, 4000);
    for (let i = 0; i < 3; i++) generateRadioMessage();
  </script>
</body>
</html>
