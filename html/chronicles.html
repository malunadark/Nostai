<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Хроники Забвения — Волонтёры</title>
<style>
  /* ---------- FONTS ---------- */
  @font-face {
    font-family: 'destroycyr';
    src: url('../assets/fonts/destroycyr.ttf') format('truetype');
    font-display: swap;
  }
  @font-face {
    font-family: 'futhark';
    src: url('../assets/fonts/FutharkAoe.ttf') format('truetype');
    font-display: swap;
  }

  /* ---------- RESET & LAYOUT ---------- */
  :root{
    --page-w: 461px;
    --page-h: 321px;
  }
  html,body{height:100%;margin:0;font-family:destroycyr, serif;-webkit-font-smoothing:antialiased;}
  body{
    margin:0;
    padding:0;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    background-size:cover;
    background-position:center;
    transition: background-image 900ms ease-in-out, background-color 900ms ease-in-out;
  }

  /* ---------- PRELOAD / LOADER ---------- */
  .loader {
    position: fixed;
    top:12px; right:12px;
    padding:8px 12px;
    background: rgba(0,0,0,0.6);
    color: #ffdcb0;
    border-radius:6px;
    z-index:1000;
    font-size:14px;
    box-shadow:0 4px 16px rgba(0,0,0,0.6);
    display:flex;
    gap:8px;
    align-items:center;
  }
  .loader .dot { width:8px; height:8px; background:#ff8a00; border-radius:50%; animation:blink 1s infinite; }
  .loader .dot:nth-child(2){ animation-delay: .15s }
  .loader .dot:nth-child(3){ animation-delay: .3s }
  @keyframes blink { 0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2} }

  /* ---------- SMOKE & ASH ---------- */
  .smoke {
    position:fixed; inset:0; pointer-events:none; z-index:5;
    background: url('../assets/images/smoke-fog.gif') center/cover no-repeat;
    opacity:0.34; mix-blend-mode: lighten;
    transition: opacity .6s ease;
  }

  .ash-layer { pointer-events:none; position:fixed; inset:0; z-index:8; overflow:hidden; }
  .ash {
    position:absolute;
    width:2px; height:2px;
    background: rgba(255,255,255,0.85);
    border-radius:50%;
    filter: blur(.6px);
    will-change: transform, opacity;
    animation-name: ashFall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
  @keyframes ashFall {
    from { transform: translateY(-8vh) rotate(0deg); opacity:0.9; }
    to   { transform: translateY(110vh) rotate(360deg); opacity:0.06; }
  }

  /* ---------- BOOK ---------- */
  .book-wrap {
    position:relative;
    width: calc(var(--page-w) * 1.8);
    height: calc(var(--page-h) * 1.8);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:10;
    perspective:1600px;
  }

  .book {
    position:relative;
    width: var(--page-w);
    height: var(--page-h);
    background: url('../assets/images/book.png') center/contain no-repeat;
    background-size: contain;
    box-shadow: 0 18px 60px rgba(0,0,0,0.7), inset 0 0 18px rgba(0,0,0,0.55);
    border-radius:6px;
    transform-origin: center;
    z-index:12;
    transition: transform 700ms cubic-bezier(.2,.8,.2,1), box-shadow 400ms;
  }

  .book.flipping { transform: rotateY(-6deg) translateY(-6px) scale(1.01); box-shadow:0 30px 80px rgba(0,0,0,0.8); }

  /* ---------- LOGO ---------- */
  .logo {
    position: absolute;
    top: calc(50% - var(--page-h) - 36px);
    left: 50%;
    transform: translateX(-50%);
    z-index:20;
    font-family: 'destroycyr';
    font-size: 14px;
    letter-spacing:1px;
    text-align:center;
    pointer-events:none;
    opacity:0.95;
    display:inline-block;
    padding:4px 12px;
  }

  .flame-text {
    background: linear-gradient(90deg, #bdb6a7 0%, #d8c9ad 22%, #ffb86c 48%, #ff5d00 80%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    text-shadow: 0 0 6px rgba(255,150,60,0.6), 0 4px 8px rgba(0,0,0,0.6);
    filter: drop-shadow(0 6px 10px rgba(0,0,0,0.55));
    mix-blend-mode: screen;
  }

  .left-page {
    position:absolute;
    left: calc(50% - var(--page-w) / 2);
    top: calc(50% - var(--page-h) / 2);
    width: calc(var(--page-w));
    height: calc(var(--page-h));
    z-index: 15;
  }

  .page-content {
    position: absolute;
    left: 12px;
    top: 10px;
    width: calc(var(--page-w) * 0.48);
    height: calc(var(--page-h) * 0.92);
    box-sizing: border-box;
    padding: 8px 10px;
    overflow: hidden;
    text-align: justify;
  }

  .subtitle {
    font-family:'destroycyr';
    font-size: 12px;
    margin:0 0 6px 0;
    line-height:1;
    color: transparent;
    -webkit-background-clip: text;
    background: linear-gradient(90deg,#e9d8c1 0%, #ffb86c 60%, #ff6b1a 100%);
    text-shadow: 0 0 6px rgba(255,140,50,0.45);
    opacity:0.98;
  }

  .body-text {
    font-family:'destroycyr';
    font-size: 8px;
    line-height: 1.28;
    color: transparent;
    -webkit-background-clip: text;
    background: linear-gradient(90deg,#d9cdb7 0%, #f3ead0 40%, #ffb86c 100%);
    text-shadow: 0 0 2px rgba(255,130,60,0.22);
    white-space: pre-wrap;
    overflow: hidden;
  }

  .wave-filtered { filter: url('#heat'); }

  .controls {
    position: absolute;
    bottom: 26px;
    left: 50%;
    transform: translateX(-50%);
    z-index:30;
    display:flex;
    gap:14px;
  }

  .btn {
    background: rgba(28,20,8,0.7);
    color: #ffdcb0;
    border: 1px solid rgba(255,140,40,0.25);
    padding: 10px 14px;
    font-family:'destroycyr';
    cursor:pointer;
    border-radius:6px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.6);
  }
</style>
<svg style="position:absolute;width:0;height:0">
  <filter id="heat">
    <feTurbulence id="turb" baseFrequency="0.002 0.02" numOctaves="1" seed="2" result="turb"/>
    <feDisplacementMap in="SourceGraphic" in2="turb" scale="6" xChannelSelector="R" yChannelSelector="G"/>
    <animate xlink:href="#turb" attributeName="baseFrequency" values="0.002 0.02;0.003 0.025;0.002 0.02" dur="4s" repeatCount="indefinite" />
  </filter>
</svg>
</head>
<body class="volunteers">
  <div id="loader" class="loader">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    <div style="margin-left:8px;font-size:13px">Загрузка фонов…</div>
  </div>

  <div class="smoke"></div>
  <div class="ash-layer" id="ashLayer"></div>

  <div class="book-wrap">
    <div id="book" class="book">
      <div class="logo flame-text" id="logoText">История Фракции Придшие</div>
      <div class="left-page">
        <div class="page-content">
          <div class="subtitle flame-text" id="subtitleText">Волонтёры</div>
          <div id="bodyText" class="body-text wave-filtered"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="controls">
    <button id="prevBtn" class="btn">← Назад</button>
    <button id="nextBtn" class="btn">Вперёд →</button>
  </div>

  <audio id="pageSound" src="../assets/music/book-page-turn-4_z1xaim4u.mp3" preload="auto"></audio>

<script>
const PAGES = [
  { id:'volunteers', bg:'../assets/images/bg-volunteers.png', title:'История Фракции Придшие', subtitle:'Волонтёры', text:
`Они явились туда не первыми, но их миссия была самой важной. Спасти от пожара людей...
...в истории Алтайских лесов.` },
  { id:'military', bg:'../assets/images/bg-military-base.png', title:'История Фракции Придшие', subtitle:'ВС РФ', text:'...' },
  { id:'emergency', bg:'../assets/images/bg-rescue-base.png', title:'История Фракции Придшие', subtitle:'МЧС', text:'...' },
  { id:'redcross', bg:'../assets/images/bg-redcross-camp.png', title:'История Фракции Придшие', subtitle:'Красный Крест', text:'...' }
];
</script>
</body>
</html>
