<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Хроники Забвения — Придшие</title>

<style>
/* ---- ШРИФТ ---- */
@font-face {
  font-family: 'destroycyr';
  src: url('../assets/fonts/destroycyr.ttf') format('truetype');
}

/* ---- ОСНОВНОЙ СТИЛЬ ---- */
body {
  margin: 0;
  padding: 0;
  background: url('../assets/images/bg-volunteers.png') center/cover no-repeat fixed;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  transition: background-image 1.5s ease-in-out;
}

.ash span {
  position: absolute;
  top: -10vh;
  animation-name: fall, drift;
  animation-timing-function: linear, ease-in-out;
  animation-iteration-count: infinite;
}

@keyframes fall {
  to {
    transform: translateY(110vh) rotate(360deg);
  }
}

@keyframes drift {
  0%   { transform: translateX(0); }
  50%  { transform: translateX(2vw); }
  100% { transform: translateX(0); }
}


/* ---- ДЫМ ---- */
.smoke {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('../assets/images/smoke-fog.gif') center/cover no-repeat;
  opacity: 0.3;
  mix-blend-mode: lighten;
  z-index: 5;
}

/* ---- КНИГА ---- */
.book {
  position: relative;
  width: 461px;
  height: 321px;
  background: url('../assets/images/book.png') center/cover no-repeat;
  z-index: 10;
  box-shadow: 0 0 40px rgba(255, 180, 100, 0.2);
  border-radius: 6px;
  overflow: hidden;
}

/* ---- ЛОГОТИП ---- */
.logo {
  position: absolute;
  top: 8%;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'destroycyr';
  font-size: 14px;
  letter-spacing: 2px;
  background: linear-gradient(90deg, #a89c8a 0%, #d2c5aa 25%, #ffb86c 55%, #ff6600 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 10px rgba(255, 160, 80, 0.6),
               0 0 25px rgba(255, 100, 40, 0.4),
               0 2px 2px rgba(50, 30, 0, 0.9);
  animation: flamePulse 3s ease-in-out infinite alternate;
}

/* ---- НАЗВАНИЕ ФРАКЦИИ ---- */
.subtitle {
  position: absolute;
  top: 16%;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'destroycyr';
  font-size: 12px;
  color: transparent;
  background: linear-gradient(90deg, #a89c8a 0%, #d2c5aa 25%, #ffb86c 55%, #ff6600 100%);
  -webkit-background-clip: text;
  text-shadow: 0 0 6px rgba(255, 140, 40, 0.4);
  animation: flamePulse 3s ease-in-out infinite alternate;
}

/* ---- ТЕКСТ ---- */
.text {
  position: absolute;
  top: 28%;
  left: 12%;
  right: 12%;
  bottom: 10%;
  font-family: 'destroycyr';
  font-size: 8px;
  line-height: 1.3;
  color: transparent;
  background: linear-gradient(90deg, #c4b8a4 0%, #e3d5b8 40%, #ffb86c 70%, #ff6600 100%);
  -webkit-background-clip: text;
  text-align: justify;
  text-shadow: 0 0 5px rgba(255, 100, 40, 0.2);
  animation: wave 8s ease-in-out infinite alternate;
  overflow-y: auto;
}

/* ---- АНИМАЦИИ ---- */
@keyframes flamePulse {
  0% { text-shadow: 0 0 10px #ff5500, 0 0 25px #ffbb66; }
  100% { text-shadow: 0 0 20px #ffaa33, 0 0 35px #ff6600; }
}

@keyframes wave {
  0% { transform: translateY(0); }
  50% { transform: translateY(-1px); }
  100% { transform: translateY(0); }
}

/* ---- КНОПКИ ---- */
.controls {
  position: absolute;
  bottom: 4%;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 15px;
  z-index: 20;
}

button {
  font-family: 'destroycyr';
  font-size: 10px;
  padding: 4px 12px;
  background: rgba(40, 20, 0, 0.6);
  color: #ffcc99;
  border: 1px solid rgba(255, 180, 100, 0.4);
  border-radius: 4px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: rgba(80, 30, 0, 0.8);
  box-shadow: 0 0 10px rgba(255, 120, 60, 0.6);
}
</style>
</head>

<body>
<div class="smoke"></div>
<div class="ash"></div>

<div class="book">
  <div class="logo">История Фракции Придшие</div>
  <div class="subtitle">Волонтёры</div>
  <div class="text" id="storyText"></div>

  <div class="controls">
    <button onclick="prevPage()">◀ Назад</button>
    <button onclick="nextPage()">Следующая ▶</button>
  </div>
</div>

<audio id="pageSound" src="../assets/music/book-page-turn-4_z1xaim4u.mp3" preload="auto"></audio>

<script>
/* ---- ПАДАЮЩИЙ ПЕПЕЛ ---- */
/* ---- ПАДАЮЩИЙ ПЕПЕЛ — реалистичный серый, без огненных оттенков ---- */
const ashContainer = document.querySelector('.ash');
const ASH_COUNT = 80; // количество частиц (можно регулировать)

for (let i = 0; i < ASH_COUNT; i++) {
  const p = document.createElement('span');

  // размеры частиц (похожие на пепел)
  const w = 2 + Math.random() * 5;   // ширина 2–7px
  const h = 6 + Math.random() * 14;  // высота 6–20px
  p.style.width = `${w}px`;
  p.style.height = `${h}px`;

  // позиция по горизонтали (в пределах экрана)
  p.style.left = (Math.random() * 100) + 'vw';

  // цвет — только холодные серые тона
  const shade = 180 + Math.random() * 60; // от светло-серого до почти белого
  const opa = 0.15 + Math.random() * 0.4; // прозрачность
  p.style.background = `rgba(${shade}, ${shade}, ${shade}, ${opa})`;
  p.style.borderRadius = `${20 + Math.random() * 60}%`; // слегка округлые формы
  p.style.filter = 'blur(0.6px)';
  p.style.opacity = opa;

  // скорость и движение
  const dur = 6 + Math.random() * 12; // длительность падения 6–18s
  const delay = -Math.random() * dur; // старт сразу из разных позиций
  p.style.animationDuration = `${dur}s`;
  p.style.animationDelay = `${delay}s`;

  // лёгкий поворот (эффект плавного парения)
  const rot = Math.random() * 360;
  p.style.transform = `rotate(${rot}deg) translateZ(0)`;

  // добавляем элемент в контейнер
  ashContainer.appendChild(p);
}

/* ---- СТРАНИЦЫ ---- */
const pages = [
  {
    bg: '../assets/images/bg-volunteers.png',
    subtitle: 'Волонтёры',
    text: `Они явились туда не первыми, но их миссия была самой важной. Спасти от пожара людей. ...`
  },
  {
    bg: '../assets/images/bg-military-base.png',
    subtitle: 'ВС РФ',
    text: `Сила, мощь, дух военный — всё это заключено в слове ВС РФ. Что может быть лучше них? ...`
  },
  {
    bg: '../assets/images/bg-rescue-base.png',
    subtitle: 'МЧС',
    text: `Сильные рыцари, доблестные, покорители огня. Служители людей, помощники в бедствиях...`
  },
  {
    bg: '../assets/images/bg-redcross-camp.png',
    subtitle: 'Красный Крест',
    text: `Полевые госпитали, палатки, помощь пострадавшим, доброта и сострадание — основа их служения.`
  }
];

let currentPage = 0;
const storyText = document.getElementById('storyText');
const subtitle = document.querySelector('.subtitle');
const sound = document.getElementById('pageSound');

function showPage(index) {
  document.body.style.backgroundImage = `url('${pages[index].bg}')`;
  subtitle.textContent = pages[index].subtitle;
  storyText.textContent = pages[index].text;
}

function nextPage() {
  currentPage = (currentPage + 1) % pages.length;
  playSound();
  showPage(currentPage);
}

function prevPage() {
  currentPage = (currentPage - 1 + pages.length) % pages.length;
  playSound();
  showPage(currentPage);
}

function playSound() {
  sound.currentTime = 0;
  sound.play();
}

showPage(0);
</script>
</body>
</html>
