<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOSTAI</title>

  <style>
    @font-face {
      font-family: 'FutharkAoe';
      src: url('assets/fonts/FutharkAoe.ttf') format('truetype');
    }
    @font-face {
      font-family: 'destroycyr';
      src: url('assets/fonts/destroycyr.ttf') format('truetype');
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: 'destroycyr', sans-serif;
      background: url('assets/images/Nostai.png') center/cover no-repeat;
      color: #837E7C;
      overflow: hidden;
      position: relative;
    }

#logo {
  position: absolute;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 30;
  font-size: 4.2rem;
  letter-spacing: 6px;
  font-family: 'destroycyr', serif;
  color: #d6d6d6;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;

  /* —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–µ–Ω–∏: –≥—Ä–∞–Ω–∏—Ç + –æ–≥–æ–Ω—å –≤–Ω—É—Ç—Ä–∏ */
  text-shadow:
    0 2px 4px rgba(0,0,0,0.8),
    0 0 10px rgba(255, 80, 0, 0.6),
    0 0 25px rgba(255, 140, 0, 0.4),
    0 -1px 1px rgba(255,255,255,0.15),
    0 0 40px rgba(255, 60, 0, 0.2);

  filter: contrast(1.2) brightness(0.95);
  pointer-events: none;
  user-select: none;

  animation: fireGranite 4s ease-in-out infinite;
  position: relative;
}

/* —à—É–º–æ–≤–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ –≥—Ä–∞–Ω–∏—Ç–∞ */
#logo::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url('assets/images/granite-noise.png'); /* –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ —à—É–º–∞ */
  background-size: cover;
  opacity: 0.15; /* —Å–∏–ª–∞ —Ç–µ–∫—Å—Ç—É—Ä—ã */
  pointer-events: none;
  z-index: -1;
}

/* –∞–Ω–∏–º–∞—Ü–∏—è –ø—ã–ª–∞—é—â–µ–≥–æ –∫–∞–º–Ω—è */
@keyframes fireGranite {
  0%, 100% {
    text-shadow:
      0 2px 4px rgba(0,0,0,0.8),
      0 0 10px rgba(255, 70, 0, 0.6),
      0 0 25px rgba(255, 120, 0, 0.4),
      0 -1px 1px rgba(255,255,255,0.15),
      0 0 40px rgba(255, 60, 0, 0.2);
    transform: translateX(-50%) scale(1);
    filter: brightness(0.95);
  }
  50% {
    text-shadow:
      0 2px 6px rgba(0,0,0,0.9),
      0 0 18px rgba(255, 100, 0, 0.8),
      0 0 35px rgba(255, 160, 0, 0.5),
      0 -1px 2px rgba(255,255,255,0.25),
      0 0 60px rgba(255, 140, 0, 0.3);
    transform: translateX(-50%) scale(1.03);
    filter: brightness(1.05);
  }
}

    /* Canvas —Ä—É–Ω */
    #runesCanvas {
      display: block;
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–ª–æ–∏ */
    #fog {
      position:absolute; inset:0; z-index:5;
      background: url('assets/images/smoke-fog.gif') center/cover no-repeat;
      opacity:0.22; pointer-events:none;
    }
    #shadow {
      position:absolute; inset:0; z-index:6;
      background: url('assets/effects/shadow.jpg') center/cover no-repeat;
      opacity:0.14; pointer-events:none;
    }

    /* –†–∞–¥–∏–æ –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π */
    #radioWrap {
      position: absolute;
      top: 14px;
      left: 14px;
      width: 200px;
      height: 140px;
      z-index: 35;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:auto;
      cursor: pointer;
    }
    #radioCanvas {
      width: 200px;
      height: 140px;
      display:block;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
      background: rgba(0,0,0,0.15);
    }
    #radioFallback {
      width:200px;
      height:140px;
      display:none;
      align-items:center;
      justify-content:center;
      color:#FF8C00;
      font-size:0.85rem;
      background: rgba(0,0,0,0.35);
      border-radius:10px;
      padding:8px;
      text-align:center;
    }

    /* –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏ */
    #music-toggle {
      position: fixed;
      bottom: 25px;
      right: 25px;
      font-size: 1.6rem;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 140, 0, 0.6);
      color: #ffbb77;
      border-radius: 12px;
      cursor: pointer;
      padding: 8px 12px;
      box-shadow: 0 0 10px rgba(255, 120, 0, 0.4);
      transition: all 0.3s ease;
      z-index: 100;
      backdrop-filter: blur(4px);
    }
    #music-toggle:hover {
      background: rgba(255, 140, 0, 0.2);
      box-shadow: 0 0 20px rgba(255, 120, 0, 0.7);
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <div id="logo">NOSTAI</div>

  <!-- –†–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫ –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π -->
  <div id="radioWrap" title="–í–µ—â–∞—Ç–µ–ª—å–Ω–∞—è ‚Äî –æ—Ç–∫—Ä—ã—Ç—å">
    <canvas id="radioCanvas"></canvas>
    <div id="radioFallback">–û—Ç–∫—Ä—ã—Ç—å –í–µ—â–∞—Ç–µ–ª—å–Ω—É—é</div>
  </div>

  <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–ª–æ–∏ -->
  <div id="fog"></div>
  <div id="shadow"></div>

  <!-- –†—É–Ω–Ω—ã–π canvas -->
  <canvas id="runesCanvas"></canvas>

  <!-- –ê—É–¥–∏–æ -->
  <audio id="bg-music" src="assets/music/–£—Ö–æ–¥—è—â–∞—è –°—É–¥—å–±–∞.mp3" loop></audio>
  <button id="music-toggle" title="–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É">üîä</button>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="js/main.js"></script>
  <script type="module" src="js/radioScene.js"></script>

  <script>
    // === –ú—É–∑—ã–∫–∞ ===
    const music = document.getElementById('bg-music');
    music.volume = 0.4;

    async function playMusic() {
      try {
        await music.play();
      } catch(err) {
        console.warn('–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –∂–¥—ë–º –∫–ª–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', err);
        const startOnClick = () => { music.play(); window.removeEventListener('click', startOnClick); };
        window.addEventListener('click', startOnClick);
      }
    }

    window.addEventListener('load', playMusic);

    const toggle = document.getElementById('music-toggle');
    toggle.addEventListener('click', () => {
      if(music.paused){ music.play(); toggle.textContent='üîä'; }
      else { music.pause(); toggle.textContent='üîá'; }
    });

    // === –†–∞–¥–∏–æ –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π –∫–ª–∏–∫ ===
    const radioWrap = document.getElementById('radioWrap');
    radioWrap.addEventListener('click', () => {
      document.body.style.transition = "opacity 1s ease";
      document.body.style.opacity = 0;
      setTimeout(() => { window.location.href="html/broadcast.html"; }, 1000);
    });
    radioWrap.addEventListener('mouseenter', () => {
      const audio = new Audio('assets/music/book-page-turn-4_z1xaim4u.mp3');
      audio.volume = 0.25;
      audio.play();
    });
  </script>
</body>
</html>
