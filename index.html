<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NOSTAI</title>
<style>
/* ---- Шрифты ---- */
@font-face {
  font-family: 'destroycyr';
  src: url('assets/fonts/destroycyr.ttf') format('truetype');
  font-display: swap;
}
@font-face {
  font-family: 'futhark';
  src: url('assets/fonts/FutharkAoe.ttf') format('truetype');
  font-display: swap;
}

/* ---- Переменные ---- */
:root{
  --gold:#ffb84d;
  --ember:#ff8c00;
  --bg-dark:#060405;
}

/* ---- Базовый стиль ---- */
html,body{height:100%;margin:0;padding:0;background:#000;overflow:hidden;font-family:'destroycyr',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
body{
  background: url('assets/images/Nostai.png') center/cover no-repeat fixed;
  position:relative;
  color:#d6d6d6;
}

/* ---- затемнение поверх фона ---- */
#overlay-bg{
  position:fixed; inset:0; background:rgba(0,0,0,0.45); pointer-events:none; z-index:1;
}

/* ---- логотип ---- */
#logo{
  position:absolute; top:6vh; left:50%; transform:translateX(-50%);
  z-index:10;
  font-family:'destroycyr',serif;
  font-size:clamp(2.2rem,6vw,5.2rem);
  letter-spacing:6px;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-align:center;
  color:#d0a36a;
  text-shadow:0 4px 6px rgba(0,0,0,0.9),0 0 14px rgba(255,90,0,0.6);
  animation:logoPulse 4s ease-in-out infinite;
}
#logo::before{
  content:'';
  position:absolute; inset:0;
  background: url('assets/images/granite-noise.png') center/cover no-repeat;
  opacity:0.22;
  mix-blend-mode:overlay;
  z-index:-1;
  pointer-events:none;
}
@keyframes logoPulse{
  0%,100%{ filter:brightness(0.9); transform:translateX(-50%) scale(1); text-shadow:0 4px 6px rgba(0,0,0,0.9),0 0 12px rgba(255,80,0,0.5); }
  50%{ filter:brightness(1.05); transform:translateX(-50%) scale(1.03); text-shadow:0 6px 16px rgba(0,0,0,1),0 0 30px rgba(255,140,0,0.8); }
}

/* ---- подзаголовок ---- */
#subtitle{
  position:absolute; top:calc(6vh + 1.2em); left:50%; transform:translateX(-50%);
  z-index:10;
  font-size:clamp(0.9rem,1.8vw,1.4rem);
  color:var(--gold);
  text-shadow:0 0 10px rgba(255,140,0,0.35);
  cursor:default;
}

/* ---- руны ---- */
.rune{
  position:absolute;
  font-family:'futhark', serif;
  font-size: clamp(20px, 3.2vw, 48px);
  color: rgba(255,190,140,0.92);
  text-shadow:0 0 8px rgba(255,140,0,0.45),0 0 18px rgba(255,100,0,0.25);
  transform-origin:center;
  mix-blend-mode:screen;
  z-index:6;
  opacity:0.95;
  pointer-events:none;
  animation: runeFlicker 3s ease-in-out infinite;
}
@keyframes runeFlicker{
  0%{ transform:scale(1) rotate(0deg); opacity:0.92; filter:brightness(0.95); }
  45%{ transform:scale(1.06) rotate(-1deg); opacity:1; filter:brightness(1.15); }
  100%{ transform:scale(1) rotate(0deg); opacity:0.92; filter:brightness(0.95); }
}

/* ---- фон рун (малый, прозрачный) ---- */
#runes-bg{
  position: absolute; right: 5%; top: 10%; width: 15vw; max-width:150px; opacity:0.08; z-index:5; pointer-events:none;
  mix-blend-mode:overlay;
}

/* ---- книга ---- */
#bookWrap{
  position:absolute; bottom:28px; left:50%; transform:translateX(-50%);
  z-index:9; text-align:center; width:50%; max-width:520px;
}
#book{
  width:100%;
  height:auto;
  opacity:0.85;
  border-radius:8px;
  box-shadow:0 8px 30px rgba(0,0,0,0.6);
  transition: transform .5s ease, opacity .4s ease, box-shadow .4s ease;
  cursor:pointer;
  display:block;
  margin:0 auto;
}
#book:hover{
  transform: translateY(-8px) scale(1.03);
  box-shadow: 0 12px 40px rgba(255,160,0,0.7), 0 0 60px rgba(255,200,60,0.5);
}

/* свечение и дым при hover */
#bookGlow{
  position:absolute; bottom:-36px; left:50%; transform:translateX(-50%);
  width:320px; height:130px; border-radius:50%;
  background:radial-gradient(circle, rgba(255,200,60,0.6) 0%, rgba(255,100,0,0) 70%);
  pointer-events:none;
  opacity:0; transition:opacity .35s ease; z-index:7;
}
#bookSmoke{
  position:absolute; bottom:-6px; left:50%; transform:translateX(-50%);
  width:240px; height:120px; background:url('assets/images/smoke-fog.gif') center/contain no-repeat;
  opacity:0.55; pointer-events:none; z-index:7;
  transition:opacity .35s ease;
}
#bookWrap:hover #bookGlow{ opacity:1; }
#bookWrap:hover #bookSmoke{ opacity:1; }

/* ---- кнопки перехода под книгой ---- */
.navBtn{
  background:transparent;
  border:1px solid rgba(255,140,0,0.25);
  color:var(--gold);
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
  transition:all .3s ease;
}
.navBtn:hover{
  background: rgba(255,140,0,0.15);
}

/* ---- пепел canvas ---- */
#ashCanvas{ position:fixed; inset:0; z-index:8; pointer-events:none; }

/* ---- медиа ---- */
@media (max-width:600px){
  #bookWrap{ width:70%; max-width:360px; bottom:18px; }
  #logo{ font-size:clamp(1.6rem,8vw,3rem); top:4vh; }
  .rune{ font-size: clamp(16px, 6vw, 34px); }
}
</style>
</head>
<body>

<!-- затемнение -->
<div id="overlay-bg" aria-hidden="true"></div>

<!-- логотип -->
<div id="logo" aria-hidden="true">NOSTAI</div>
<div id="subtitle" aria-hidden="true">Придшие не уходят — те, кто здесь и там</div>

<!-- фоновые руны -->
<img id="runes-bg" src="assets/images/руны.png" alt="" aria-hidden="true">

<!-- текстовые руны -->
<div class="rune" style="left:6%; top:20%; transform:translate(-50%,-50%);">ᚠ</div>
<div class="rune" style="left:12%; top:32%; transform:translate(-50%,-50%); font-size:42px;">ᚢ</div>
<div class="rune" style="left:18%; top:18%; transform:translate(-50%,-50%);">ᚦ</div>
<div class="rune" style="left:82%; top:22%; transform:translate(-50%,-50%);">ᚱ</div>
<div class="rune" style="left:76%; top:34%; transform:translate(-50%,-50%);">ᚲ</div>

<!-- книга -->
<div id="bookWrap">
  <img id="book" src="assets/images/old-notebook.png" alt="Хроники Забвения" title="Хроники Забвения">
  <div id="bookGlow" aria-hidden="true"></div>
  <div id="bookSmoke" aria-hidden="true"></div>
  <div style="margin-top:12px; display:flex; gap:12px; justify-content:center;">
    <button class="navBtn" data-href="html/chronicles.html">Хроники Забвения</button>
    <button class="navBtn" data-href="html/broadcast.html">Узел Связи</button>
  </div>
</div>

<!-- canvas для пепла -->
<canvas id="ashCanvas" aria-hidden="true"></canvas>

<!-- аудио -->
<audio id="bg-music" src="assets/music/Уходящая Судьба.mp3" loop preload="auto"></audio>
<audio id="bookSound" src="assets/music/book-page-turn-4_z1xaim4u.mp3" preload="auto"></audio>

<script>
/* ------------------ Пепел ------------------ */
(function(){
  const canvas = document.getElementById('ashCanvas');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = window.innerWidth;
  let H = canvas.height = window.innerHeight;
  const count = Math.round((W*H)/12000);
  const parts = [];
  function rand(min,max){ return Math.random()*(max-min)+min; }
  for(let i=0;i<count;i++){
    parts.push({
      x: rand(0,W), y: rand(0,H),
      r: rand(0.6,3.2), a: rand(0.08,0.35),
      dx: rand(-0.25,0.25), dy: rand(0.15,0.9),
      rot: rand(0,Math.PI*2), drift: rand(-0.02,0.02)
    });
  }
  function draw(){
    ctx.clearRect(0,0,W,H);
    for(let p of parts){
      p.x += p.dx; p.y += p.dy; p.rot += p.drift;
      if(p.y>H+10){ p.y=-10; p.x=rand(0,W); }
      if(p.x<-10)p.x=W+10; if(p.x>W+10)p.x=-10;
      ctx.save();
      ctx.translate(p.x,p.y);
      ctx.rotate(p.rot);
      ctx.globalAlpha=p.a;
      ctx.fillStyle='#cfcfcf';
      ctx.beginPath();
      ctx.ellipse(0,0,p.r,p.r*0.6,0,0,Math.PI*2);
      ctx.fill();
      ctx.restore();
    }
    requestAnimationFrame(draw);
  }
  draw();
  window.addEventListener('resize', ()=>{ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; });
})();

/* ------------------ Музыка ------------------ */
(function(){
  const music = document.getElementById('bg-music');
  music.volume = 0.65;
  music.play().catch(()=>{});
  window.addEventListener('pointerdown', ()=>{ music.play().catch(()=>{}); }, { once:true });
})();

/* ------------------ Книга: звук и переход ------------------ */
(function(){
  const book = document.getElementById('book');
  const bookSound = document.getElementById('bookSound');
  const navBtns = document.querySelectorAll('.navBtn');

  book.addEventListener('click', ()=> {
    bookSound.currentTime=0; bookSound.play().catch(()=>{});
    setTimeout(()=>{ window.location.href='html/chronicles.html'; }, 1200);
  });

  navBtns.forEach(btn=>{
    btn.addEventListener('click', ()=> {
      const href = btn.getAttribute('data-href');
      if(href) window.location.href=href;
    });
  });
})();
</script>
</body>
</html>
