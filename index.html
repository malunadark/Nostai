<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NOSTAI</title>
  <link rel="stylesheet" href="styles.css">

  <style>
  @font-face {
    font-family: 'Deutsch Gothic';
    src: url('assets/fonts/DeutschGothic.ttf') format('truetype');
  }

  .nostai-title {
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 60px; /* —É–º–µ–Ω—å—à–µ–Ω–æ */
    font-family: 'Deutsch Gothic', serif;
    color: white;
    text-shadow: 0 0 20px #ff5e00;
    z-index: 3;
  }

  .nostai-subtitle {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 20px;
    font-style: italic;
    font-family: 'Georgia', serif;
    background: linear-gradient(to right, #a0a0a0, #4f4f4f, #2a2a2a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
    z-index: 2;
  }

  .vignette {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 50%, rgba(0,0,0,0.75) 100%);
    z-index: 1;
  }

  .infection-zone {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }

  .smoke-layer {
    width: 200%;
    height: 100%;
    background: url('assets/effects/smoke.jpg') repeat-x;
    background-size: cover;
    animation: moveSmoke 60s linear infinite;
    opacity: 0.25;
    filter: blur(4px);
  }

  @keyframes moveSmoke {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  .shadow {
    position: absolute;
    bottom: 0;
    width: 80px;
    height: 180px;
    background: url('assets/effects/shadow.jpg') center/contain no-repeat;
    opacity: 0;
    animation: appearShadow 30s infinite;
    filter: brightness(0.5);
  }

  .shadow-1 {
    left: 20%;
    animation-delay: 10s;
  }

  .shadow-2 {
    left: 65%;
    animation-delay: 20s;
  }

  @keyframes appearShadow {
    0%, 90%, 100% { opacity: 0; transform: scale(1) translateY(0); }
    40% { opacity: 0.3; transform: scale(1.05) translateY(-5px); }
    50% { opacity: 0.5; transform: scale(1.1) translateY(-10px); }
    60% { opacity: 0.3; transform: scale(1.05) translateY(-5px); }
  }

  .rune {
    position: absolute;
    font-size: 24px;
    color: rgba(255, 255, 255, 0.4);
    font-family: 'Georgia', serif;
    animation: floatRune 20s infinite ease-in-out;
  }

  @keyframes floatRune {
    0% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
    100% { transform: translateY(0); }
  }

  .rune1 { top: 20%; left: 10%; animation-delay: 0s; }
  .rune2 { top: 40%; left: 20%; animation-delay: 5s; }
  .rune3 { top: 60%; left: 80%; animation-delay: 10s; }
  .rune4 { top: 70%; left: 50%; animation-delay: 15s; }
  .rune5 { top: 30%; left: 70%; animation-delay: 20s; }
  </style>
</head>

<body>
  <div id="three-container"></div>

  <!-- –í–µ—â–∞—Ç–µ–ª—å–Ω–∞—è -->
  <a href="broadcast.html" class="broadcast-btn">üì° –í–µ—â–∞—Ç–µ–ª—å–Ω–∞—è</a>

  <!-- –§–æ–Ω –∏ –¥—ã–º -->
  <div class="background"></div>
  <div class="smoke"></div>

  <!-- –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ -->
  <button id="mute-btn">üîä</button>
  <audio id="background-audio" autoplay loop>
    <source src="assets/audio/–£—Ö–æ–¥—è—â–∞—è –°—É–¥—å–±–∞.mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
  </audio>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="nostai-title">–í–•–û–î –í –ë–ï–ó–î–ù–£</div>
  <div class="nostai-subtitle">–ö–æ–≥–¥–∞ —Ç—ã –≤—Ö–æ–¥–∏—à—å ‚Äî —Ç—ã —É–∂–µ –Ω–µ –≤—ã—Ö–æ–¥–∏—à—å –ø—Ä–µ–∂–Ω–∏–º.</div>

  <!-- –í–∏–Ω—å–µ—Ç–∫–∞ -->
  <div class="vignette"></div>

  <!-- –ó–æ–Ω–∞ –∑–∞—Ä–∞–∂–µ–Ω–∏—è -->
  <div class="infection-zone">
    <div class="smoke-layer"></div>
    <div class="shadow shadow-1"></div>
    <div class="shadow shadow-2"></div>
  </div>

  <!-- –õ–µ—Ç–∞—é—â–∏–µ —Ä—É–Ω—ã -->
  <div class="rune rune1">·ö®</div>
  <div class="rune rune2">·õâ</div>
  <div class="rune rune3">·õü</div>
  <div class="rune rune4">·ö≤</div>
  <div class="rune rune5">·õè</div>

  <!-- Three.js + GLTFLoader -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.156.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.156.1/examples/js/loaders/GLTFLoader.js"></script>
  <script src="door-scene.js"></script>

  <script>
    const audio = document.getElementById('background-audio');
    const muteBtn = document.getElementById('mute-btn');
    let isMuted = false;

    muteBtn.addEventListener('click', () => {
      isMuted = !isMuted;
      audio.muted = isMuted;
      muteBtn.textContent = isMuted ? 'üîá' : 'üîä';
    });

    window.addEventListener('click', () => {
      if (audio.paused) {
        audio.play().catch(() => {});
      }
    }, { once: true });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–≤–µ—Ä–∏ (–ø—Ä–∏–º–µ—Ä—ã)
    const doors = {
      'door_bezdna': 'register.html',
      'door_chronicles': 'chronicles.html'
      // –î–æ–±–∞–≤—å –∑–¥–µ—Å—å id –º–æ–¥–µ–ª–µ–π –¥–≤–µ—Ä–µ–π –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Å—ã–ª–∫–∏
    };

    for (const [id, link] of Object.entries(doors)) {
      const el = document.getElementById(id);
      if (el) {
        el.addEventListener('click', () => {
          el.classList.add('camera-zoom');
          setTimeout(() => {
            window.location.href = link;
          }, 1500); // –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        });
      }
    }
  </script>
</body>
</html>
