<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOSTAI</title>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π CSS —Å–∞–π—Ç–∞ -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/chronicles.css">

  <style>
    @font-face {
      font-family: 'destroycyr';
      src: url('./assets/fonts/destroycyr.ttf') format('truetype');
    }

    html, body { height: 100%; margin: 0; }
    body {
      font-family: 'destroycyr', sans-serif;
      background: url('./assets/images/Nostai.png') center/cover no-repeat;
      color: #837E7C;
      overflow: hidden;
      position: relative;
    }

    /* ===== –õ–æ–≥–æ—Ç–∏–ø ===== */
    #logo-container {
      position: absolute;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 30;
      pointer-events: none;
    }
    #logo {
      font-size: 4.8rem;
      letter-spacing: 6px;
      font-family: 'destroycyr', serif;
      color: #cfcfcf;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow:
        2px 2px 2px rgba(0,0,0,0.8),
        -2px -2px 2px rgba(0,0,0,0.6),
        0 2px 4px rgba(0,0,0,0.5),
        0 0 8px rgba(255, 100, 0, 0.7),
        0 0 20px rgba(255, 140, 0, 0.5),
        0 0 35px rgba(255, 180, 0, 0.3),
        0 -1px 1px rgba(255,255,255,0.2);
      filter: contrast(1.3) brightness(0.95);
      animation: fireGranite 4s ease-in-out infinite;
      position: relative;
    }

    @keyframes fireGranite {
      0%,100% {
        text-shadow:
          2px 2px 2px rgba(0,0,0,0.8),
          -2px -2px 2px rgba(0,0,0,0.6),
          0 2px 4px rgba(0,0,0,0.5),
          0 0 8px rgba(255, 100, 0, 0.7),
          0 0 20px rgba(255, 140, 0, 0.5),
          0 0 35px rgba(255, 180, 0, 0.3),
          0 -1px 1px rgba(255,255,255,0.2);
        filter: brightness(0.95);
      }
      50% {
        text-shadow:
          2px 2px 4px rgba(0,0,0,0.9),
          -2px -2px 3px rgba(0,0,0,0.7),
          0 3px 6px rgba(0,0,0,0.6),
          0 0 12px rgba(255, 120, 0, 0.9),
          0 0 30px rgba(255, 160, 0, 0.6),
          0 0 45px rgba(255, 200, 0, 0.4),
          0 -1px 2px rgba(255,255,255,0.25);
        filter: brightness(1.05);
      }
    }

    /* ===== –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ ===== */
    #subtitle-container {
      position: absolute;
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 25;
    }
    #subtitle {
      font-family: 'destroycyr', serif;
      font-size: 1.6rem;
      text-align: center;
      cursor: pointer;
      color: #ffcc80;
      letter-spacing: 1.2px;
      text-shadow:
        0 0 4px rgba(255, 120, 40, 0.6),
        0 0 8px rgba(255, 160, 60, 0.4),
        0 0 14px rgba(255, 190, 80, 0.3),
        0 0 28px rgba(255, 200, 100, 0.2);
      animation: subtitleGlow 6s ease-in-out infinite;
    }
    #subtitle:hover {
      transform: scale(1.05);
    }
    @keyframes subtitleGlow {
      0%, 100% { opacity: 0.9; }
      50% { opacity: 1; }
    }

    /* ===== –ö–Ω–∏–≥–∞ ===== */
    #bookWrap {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #book {
      width: 250px;        /* –º–∞–ª–µ–Ω—å–∫–∞—è –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –∫–Ω–∏–≥–∞ */
      height: auto;
      border-radius: 6px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      transition: transform 0.8s ease, box-shadow 0.5s ease, opacity 0.5s ease;
      transform-origin: bottom center;
      opacity: 0.6;        /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å */
      cursor: pointer;
    }
    #book:hover {
      transform: translateY(-10px) scale(1.05) rotateX(5deg); /* –ª—ë–≥–∫–æ–µ –ø–∞—Ä–µ–Ω–∏–µ –∏ –Ω–∞–∫–ª–æ–Ω */
    }

    /* ===== –°–≤–µ—Ç –∏ –¥—ã–º ===== */
    #bookGlow {
      position: absolute;
      top: -50px;
      width: 350px;
      height: 150px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,200,50,0.6) 0%, rgba(255,100,0,0) 70%);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .glow-active { opacity: 1; }

    #bookSmoke {
      position: absolute;
      bottom: 0;
      width: 280px;
      height: 140px;
      background: url('./assets/images/smoke-fog.gif') center/contain no-repeat;
      opacity: 0.4;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    @keyframes smokeRise {
      0% { transform: translateY(0); opacity: 0.4; }
      100% { transform: translateY(-60px) scale(1.1); opacity: 0; }
    }
  </style>
</head>

<body>
  <div id="logo-container">
    <div id="logo">NOSTAI</div>
  </div>

  <div id="subtitle-container">
    <div id="subtitle">–ü—Ä–∏–¥—à–∏–µ –Ω–µ —É—Ö–æ–¥—è—Ç, –ü—Ä–∏–¥—à–∏–µ —Ç–µ –∫—Ç–æ –∑–¥–µ—Å—å –∏ —Ç–∞–º, –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–µ–±—è</div>
  </div>

  <!-- –†–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫ -->
  <div id="radioWrap" title="–í–µ—â–∞—Ç–µ–ª—å–Ω–∞—è">
    <canvas id="radioScreen"></canvas>
    <div class="lamp lamp-left"></div>
    <div class="lamp lamp-right"></div>
  </div>

  <canvas id="runesCanvas"></canvas>
  <div id="fog"></div>
  <div id="shadow"></div>

  <!-- –ö–Ω–∏–≥–∞ -->
  <div id="bookWrap">
    <img id="book" src="./assets/images/old-notebook.png" alt="–•—Ä–æ–Ω–∏–∫–∏ –ó–∞–±–≤–µ–Ω–∏—è" title="–•—Ä–æ–Ω–∏–∫–∏ –ó–∞–±–≤–µ–Ω–∏—è">
    <div id="bookGlow"></div>
    <div id="bookSmoke"></div>
  </div>
  <audio id="bookSound" src="assets/music/book-page-turn-4_z1xaim4u.mp3" preload="auto"></audio>

  <!-- –ú—É–∑—ã–∫–∞ -->
  <audio id="bg-music" src="assets/music/–£—Ö–æ–¥—è—â–∞—è –°—É–¥—å–±–∞.mp3" loop></audio>
  <button id="music-toggle" title="–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É">üîä</button>

  <script>
    // ===== –†–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫ =====
    const radioWrap = document.getElementById('radioWrap');
    radioWrap.addEventListener('click', () => {
      window.location.href = '/html/broadcast.html';
    });

    // ===== –ú—É–∑—ã–∫–∞ =====
    const music = document.getElementById('bg-music');
    const toggle = document.getElementById('music-toggle');
    function startMusic() {
      if (music.paused) music.play().catch(() => console.warn('–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω'));
    }
    window.addEventListener('click', startMusic, { once: true });
    toggle.addEventListener('click', () => {
      if(music.paused){ music.play(); toggle.textContent='üîä'; }
      else { music.pause(); toggle.textContent='üîá'; }
    });

    // ===== –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ =====
    document.getElementById('subtitle').addEventListener('click', () => {
      alert('üî• –ü—Ä–∏–¥—à–∏–µ —É–∂–µ –∑–¥–µ—Å—å...');
    });

    // ===== –†–∞–¥–∏–æ-—Å–∏–≥–Ω–∞–ª =====
    const canvas = document.getElementById('radioScreen');
    canvas.width = 140; canvas.height = 80;
    const ctx = canvas.getContext('2d');
    function drawSignal() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      const barCount = 20;
      const barWidth = canvas.width/barCount - 2;
      for(let i=0;i<barCount;i++){
        const height = Math.random()*canvas.height*0.8;
        const x = i*(barWidth+2);
        const gradient = ctx.createLinearGradient(0, canvas.height-height, 0, canvas.height);
        gradient.addColorStop(0,'#FFB84D');
        gradient.addColorStop(0.5,'#FFA500');
        gradient.addColorStop(1,'#FF8C00');
        ctx.fillStyle = gradient;
        ctx.fillRect(x, canvas.height-height, barWidth, height);
      }
      requestAnimationFrame(drawSignal);
    }
    drawSignal();

    // ===== –ö–Ω–∏–≥–∞ =====
    const book = document.getElementById('book');
    const sound = document.getElementById('bookSound');
    const glow = document.getElementById('bookGlow');
    const smoke = document.getElementById('bookSmoke');

    book.addEventListener('click', () => {
      sound.currentTime = 0;
      sound.play();
      glow.classList.add('glow-active');
      setTimeout(() => glow.classList.remove('glow-active'), 600);
      smoke.style.animation = 'smokeRise 1.2s ease forwards';
      book.classList.add('opening');
      setTimeout(() => window.location.href = '/html/chronicles.html', 1200);
    });
  </script>
</body>
</html>
