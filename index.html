<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOSTAI</title>

  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="assets/css/style.css">
  <!-- –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–∏–≥–∏ –∏ —Ö—Ä–æ–Ω–∏–∫ -->
  <link rel="stylesheet" href="assets/css/chronicles.css">
</head>

<body>
  <!-- –õ–æ–≥–æ—Ç–∏–ø -->
  <div id="logo-container"><div id="logo">NOSTAI</div></div>
  <div id="subtitle-container"><div id="subtitle">–ü—Ä–∏–¥—à–∏–µ –Ω–µ —É—Ö–æ–¥—è—Ç, –ü—Ä–∏–¥—à–∏–µ —Ç–µ –∫—Ç–æ –∑–¥–µ—Å—å –∏ —Ç–∞–º, –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–µ–±—è</div></div>

  <!-- –†–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫ -->
  <div id="radioWrap" title="–í–µ—â–∞—Ç–µ–ª—å–Ω–∞—è">
    <canvas id="radioScreen"></canvas>
    <div class="lamp lamp-left"></div>
    <div class="lamp lamp-right"></div>
  </div>

  <!-- –≠—Ñ—Ñ–µ–∫—Ç—ã -->
  <div id="fog"></div>
  <div id="shadow"></div>
  <canvas id="runesCanvas"></canvas>

  <!-- –ö–Ω–∏–≥–∞ -->
  <div id="bookWrap">
    <img id="book" src="assets/images/old-notebook.png" alt="–•—Ä–æ–Ω–∏–∫–∏ –ó–∞–±–≤–µ–Ω–∏—è" title="–•—Ä–æ–Ω–∏–∫–∏ –ó–∞–±–≤–µ–Ω–∏—è">
    <div id="bookGlow"></div>
    <div id="bookSmoke"></div>
  </div>
  <audio id="bookSound" src="assets/music/book-page-turn-4_z1xaim4u.mp3" preload="auto"></audio>

  <!-- –ú—É–∑—ã–∫–∞ -->
  <audio id="bg-music" src="assets/music/–£—Ö–æ–¥—è—â–∞—è –°—É–¥—å–±–∞.mp3" loop></audio>
  <button id="music-toggle" title="–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É">üîä</button>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    // ===== –†–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫ =====
    document.getElementById('radioWrap').addEventListener('click', ()=>{ window.location.href='/html/broadcast.html'; });

    // ===== –ú—É–∑—ã–∫–∞ =====
    const music = document.getElementById('bg-music');
    const toggle = document.getElementById('music-toggle');
    function startMusic() { if(music.paused) music.play().catch(()=>console.warn('–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω')); }
    window.addEventListener('click', startMusic, { once: true });
    toggle.addEventListener('click', ()=>{ if(music.paused){ music.play(); toggle.textContent='üîä'; } else { music.pause(); toggle.textContent='üîá'; } });

    // ===== –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ =====
    document.getElementById('subtitle').addEventListener('click',()=>{ alert('üî• –ü—Ä–∏–¥—à–∏–µ —É–∂–µ –∑–¥–µ—Å—å...'); });

    // ===== –†–∞–¥–∏–æ-—Å–∏–≥–Ω–∞–ª =====
    const canvas = document.getElementById('radioScreen');
    canvas.width=140; canvas.height=80;
    const ctx=canvas.getContext('2d');
    function drawSignal(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      const barCount=20, barWidth=canvas.width/barCount-2;
      for(let i=0;i<barCount;i++){
        const height=Math.random()*canvas.height*0.8;
        const x=i*(barWidth+2);
        const gradient=ctx.createLinearGradient(0,canvas.height-height,0,canvas.height);
        gradient.addColorStop(0,'#FFB84D'); gradient.addColorStop(0.5,'#FFA500'); gradient.addColorStop(1,'#FF8C00');
        ctx.fillStyle=gradient; ctx.fillRect(x,canvas.height-height,barWidth,height);
      }
      requestAnimationFrame(drawSignal);
    }
    drawSignal();

    // ===== –ö–Ω–∏–≥–∞ =====
    const book=document.getElementById('book');
    const sound=document.getElementById('bookSound');
    const glow=document.getElementById('bookGlow');
    const smoke=document.getElementById('bookSmoke');
    book.addEventListener('click',()=>{
      sound.currentTime=0; sound.play();
      glow.classList.add('glow-active');
      setTimeout(()=>glow.classList.remove('glow-active'),600);
      smoke.style.animation='smokeRise 1.2s ease forwards';
      book.classList.add('opening');
      setTimeout(()=>{ window.location.href='chronicles.html'; },1200);
    });
  </script>
</body>
</html>
